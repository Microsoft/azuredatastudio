VSCODE_MIXIN_REPOresources:
  containers:
  - container: linux-x64
    image: sqltoolscontainers.azurecr.io/web-build-image:1
    endpoint: ContainerRegistry

jobs:
- job: Compile
  pool:
    vmImage: 'Ubuntu-18.04'
  container: linux-x64
  steps:
  - script: |
      set -e
      echo "##vso[build.addbuildtag]$(VSCODE_QUALITY)"
    displayName: Add Quality Build Tag
  - template: sql-product-compile.yml
  timeoutInMinutes: 90

- job: LinuxWeb
  pool:
    vmImage: 'Ubuntu-18.04'
  container: linux-x64
  variables:
    VSCODE_ARCH: x64
  dependsOn:
  - Compile
  steps:
  - template: web/sql-product-build-web.yml
  timeoutInMinutes: 90

- job: Docker
  pool:
    vmImage: 'Ubuntu-18.04'
  container: linux-x64
  dependsOn:
  - LinuxWeb
  steps:
  - template: docker/sql-product-build-docker.yml
  timeoutInMinutes: 90

trigger: none
pr: none
